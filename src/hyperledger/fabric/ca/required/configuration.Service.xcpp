// This is C++2a -*- c++ -*- in the S.C.O.L.D. Stylings that are so popular these days
// Copyright Verizon Media.
// The license statement is in the LICENSE file at the top of the repository; this code is licensable under the Apache 2.0 license.
#divert <fpp>
#forward hyperledger.fabric.ca.required.Configuration
#import hyperledger.fabric.ca.traits.Configuration
#include <hpp/hyperledger.fabric.ca.traits.Configuration>
#import hyperledger.fabric.ca.required.name.Service
namespace hyperledger::fabric::ca::required::configuration {
  //
  // Is this Configuration<NAME> in the universe of Configurations, of Services, as named??
  // a) is a configuration
  // b) is a service
  //
  // Usage:
  //
  //   Hack The Spew.
  //
  template<typename CONFIGURATION> concept bool Service = requires(CONFIGURATION) {
    typename traits::template Configuration<CONFIGURATION>::Name;
    requires required::Configuration<CONFIGURATION>;
    requires required::name::Service<typename traits::template Configuration<CONFIGURATION>::Name>;
  };
}
#endiv
#divert <cpp>
// Of course this is test code
#import hyperledger.fabric.ca.Configuration
namespace {
  namespace tests {
    using namespace hyperledger::fabric::ca;
    static_assert(required::configuration::Service<Configuration<MAIN>>);
    static_assert(not required::configuration::Service<Configuration<DRIVER>>);
    //
    static_assert(not required::configuration::Service<Configuration<FILES>>);
    static_assert(not required::configuration::Service<Configuration<HTTP>>);
    static_assert(not required::configuration::Service<Configuration<SOCKET>>);
    static_assert(not required::configuration::Service<Configuration<SQLITE>>);
  }
}
#endiv
